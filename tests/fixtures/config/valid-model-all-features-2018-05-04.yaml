---
root: '123456789' # the account id; used by orgroller to verify the Org root
featureset: ALL # use this organization for centralized management instead of just centralized billing
version: '2018-05-04'
provisioner:
  role: org-bootstrapper # the role name generated in new member accounts used for resource provisioning
  type: cfn-stack-set # if resource stacks are described, use AWS Stack-Sets to provision them

accounts: # list of member accounts to create or invite
  - name: foo-account # the member account's name
    owner: foo-owner-email@mycompany.com # the email address used to activate the member account
    groups:
      - foo-bar-group # arbitrary grouping mechanism for resource provisioning
  - name: bar-account
    owner: bar-owner-email@othercompany.com
    groups:
      - foo-bar-group
  - name: pre-existing-account
    owner: pre-existing-account-owner@othercompany.com
    accountid: '987654321'

policies: # list of service control policies to create
  - name: no-x-policy
    description: allows all services to be utilized except <X>
    document:
      location: 's3://not-a-real-bucket/or/path'
  - name: scp-federation-only
    description: enables only those services required for IDP federation
    document:
      content:
        wow: this
        isnt:
          - actually
          - a
          - real
          - policy
          - document

orgunits: # list of top-level Organizational Units; nested structure represents hierarchy
  - name: IAM Federation
    policies: # list of policies to apply, cross-referenced by policy.name
      - scp-federation-only
    accounts: # list of accounts to place into this OU, cross-referenced by account.name
      - pre-existing-account
  - name: The Foos
    policies:
      - no-x-policy
    accounts:
      - foo-account
    orgunits:
      - name: The Bars
        accounts:
          - bar-account

stacks: # list of resource stacks to create
  - name: core-vpc
    orgunits: # list of orgunits whose descendent accounts will receive resource stacks in target regions
      - name: The Foos
        regions:
          - us-east-1
          - us-east-2
    template:
      location: 's3://also-not-a-real-bucket/or/path'
  - name: federation-idp
    accounts:
      - name: pre-existing-account
        regions:
          - us-east-1
    template:
      content:
        this:
          - 'is also'
          - 'not a real document'
